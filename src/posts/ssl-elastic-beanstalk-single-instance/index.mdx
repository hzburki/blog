---
title: Configure SSL Certificate â€” AWS Elastic Beanstalk (Single Instance)
published: true
slug: ssl-elastic-beanstalk-single-instance
date: Oct 5, 2019
excerpt: How to configure SSL Certificate on a single-instance Elastic Beanstalk environment using certbot.
tags: aws, elasticbeanstalk, ssl
featureImage: ssl-config.png
---

SSL secures data transfer between client and server-side. Not only that it also increases your websiteâ€™s Google ranking, so it's safe to say that SSL certificates are a _MUST_ have.

AWS provides a very convenient solution called â€œAWS Certificate Managerâ€ (ACM). It provides _free_ public SSL certificates that you can connect to your load balanced Elastic Beanstalk (EB) instances.

Thatâ€™s great !! but we can lose the load balancer for instances hosting our development environments and side projects â€¦ _RIGHT ??_

After all, a single low-cost instance will suffice. Weâ€™ll just generate a certificate using ACM use it on our â€œ_single instance_â€ â€¦ _wait whatâ€™s that !! we canâ€™t ??_ ðŸ˜§ðŸ˜§ðŸ˜§

> # Apparently, ACM requires a load balancer (or CloudFront distribution). Itâ€™s not possible to use the certificate with an instance directly.

Well, thatâ€™s mildly annoying ðŸ˜’ but donâ€™t worry we can still provision a free SSL certificate without enduring unnecessary load balancer expenses, in three easy steps.

### 1) Elastic Beanstalk

The first step is to say goodbye to your load balancer. Convert your instance type to â€œsingle instanceâ€ from â€œload balanced.â€ You can do this from the _Capacity_ tab inside _Configurations_. Just choose single instance in the environment type and thatâ€™s it.

![Elastic Beanstalk configuration tab.](https://cdn-images-1.medium.com/max/2518/1*ZpuT8WRGcq9mWVYY0gNByQ.png)

### 2) Certbot

The second step is creating and signing the certificate using â€œcertbotâ€. You can find it [here](https://certbot.eff.org/). I should mention that youâ€™ll need a domain to use the certificate on.

Open up the terminal on your local machine, Iâ€™m using mac so some of the commands might be a little different for you.

    certbot certonly --manual -d domain.com --preferred-challenges dns

- **_â€œcertonlyâ€_**: use certbot authenticators

- **_â€œmanualâ€_**: generate certificates on machines other than web servers.

- **_â€œdâ€_**: specify a domain

- **_â€œpreferred-challengesâ€_**: a method for domain verification

The cli will ask you to allow to log your machineâ€™s IP address. You have to agree to continue.

After that, itâ€™ll ask you to deploy a DNS TXT record with the name _\_acme-challenge.domain.com_. Press â€œenterâ€ when you want to verify the new record.

On successfully creating the certificate the cli will spit out two files â€œprivkey.pemâ€ & â€œfullchain.pemâ€.

    certbot certificates

You can use the above command to list all the certificates along with paths to their files.

### 3) .ebextensions

Okay so weâ€™re nearly there, the third and last step is enabling HTTPS for your â€œsingle instanceâ€ by allowing traffic on port 443.

Create a folder named **_.ebextensions_**, it is important that the name be exactly the same. Then create a configuration file with the extension **_â€œ.configâ€_**.

{% gist https://gist.github.com/hzburki/6646ea9a0e8788bc9be1ff74576127a6 %}

- **â€œpackagesâ€** key installs mod24_ssl on the instance.

- **â€œfilesâ€** key is used to create files which hold the certificate, certificate chain and private key that certbot created.

### **Note:**

1.  Copy the contents of _â€œprivkey.pemâ€_ to server.key file

2.  Copy the contents in _â€œfullchain.pemâ€_ to chain.pem file

3.  There will be two keys in _â€œfullchain.pemâ€_ You only need to copy the first key to server.crt file

Now all you have to do is deploy your code to Elastic Beanstalk. Make sure that your instance is connected to the same URL in [Route53](https://aws.amazon.com/route53/) that you entered in certbot cli â€¦

> # Aaand VoilÃ  !!! **A+** rating for your very own, free of cost SSL Certificate. You can test your SSL certificate at [ssllabs.com](https://www.ssllabs.com/ssltest/).

![nuffâ€™ said ðŸ˜ŽðŸ˜ŽðŸ˜Ž](https://cdn-images-1.medium.com/max/4392/1*lU5YNe-S1O7nN-XlYrptNg.png)

## _Happy Coding :)_
